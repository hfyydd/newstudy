# 端口管理说明

## 结束占用 8000 端口的进程

### 方法 1: 查找并结束进程（推荐）

```bash
# 查找占用 8000 端口的进程 ID
lsof -ti:8000

# 或者查看详细信息
lsof -i:8000

# 结束进程（使用上面查到的 PID）
kill <PID>

# 如果进程无法结束，使用强制结束
kill -9 <PID>
```

### 方法 2: 一行命令结束

```bash
# 直接结束占用 8000 端口的进程
kill $(lsof -ti:8000)

# 或者强制结束
kill -9 $(lsof -ti:8000)
```

### 方法 3: 如果是 macOS/Linux

```bash
# 查找进程
lsof -ti:8000

# 结束进程
kill $(lsof -ti:8000)
```

### 方法 4: 使用 pkill（如果知道进程名）

```bash
# 如果知道是 uvicorn 或 python 进程
pkill -f "uvicorn.*8000"
pkill -f "python.*server.py"
```

## 验证端口是否已释放

```bash
# 检查端口是否还在使用
lsof -i:8000

# 如果没有输出，说明端口已释放
```

## 更改服务端口

如果 8000 端口经常被占用，可以修改 `server.py` 中的端口号：

```python
if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8001)  # 改为其他端口，如 8001
```

## 常见问题

1. **Permission denied**: 如果遇到权限问题，可能需要使用 `sudo`
   ```bash
   sudo kill $(lsof -ti:8000)
   ```

2. **进程无法结束**: 使用 `kill -9` 强制结束
   ```bash
   kill -9 $(lsof -ti:8000)
   ```

3. **没有进程但端口仍被占用**: 可能是系统缓存，等待几秒后重试
